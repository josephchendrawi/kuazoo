@model com.kuazoo.Models.InventoryItemModel.InventoryItemShow
@{
    ViewBag.Title = Model.Name;
    Layout = "~/Views/Shared/_HomeLayout.cshtml";
}

@section AddToHead{
<link href="@Url.Content("~/Content/mightyslider.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=AIzaSyDBe9tprDB4drAPp-O4-Ypcer1EOvUUvrQ&sensor=true">
    </script>
<script type="text/javascript">
    function countdownStart(endtime) {
        var end = new Date(endtime);
        var now = new Date();
        var c = end.getTime() - now.getTime();
        c = c / (60 * 1000);
        if (c > 0) {
            //console.log(c);
            var hour = parseInt(c / 60);
            //console.log(hour);
            var minute = parseInt(c - (hour * 60));
            var second = parseInt((c*60) - (hour * 60 * 60) - (minute * 60));
            //console.log(minute);
            if (hour < 10) {
                hour = "0" + hour;
            }
            if (minute < 10) {
                minute = "0" + minute;
            }
            if (second < 10) {
                second = "0" + second;
            }
            $("#flashdealtime").html(hour + '<span class="small">H</span>' + minute + '<span class="small">M</span>' + second+'<span class="small">S</span>');
            setTimeout(function () {
                countdownStart(endtime);
            }, 1000);
        }
        else {
            $("#flashdealtimeplace").css("display", "none");
        }
    }
</script>
<script type="text/javascript">
    function countdownExpire(endtime) {
        var end = new Date(endtime);
        var now = new Date();
        var c = end.getTime() - now.getTime();
        c = c / (60 * 1000);
        if (c > 0) {
            c = c + 1;
            //console.log(c);
            var day = parseInt(c / 60 / 24);

            var hour = parseInt((c / 60) - (day * 24));
            //console.log(hour);
            //var minute = parseInt(c - (hour * 60));
            //console.log(minute);
            if (hour < 10) {
                hour = "0" + hour;
            }
            if (day < 10) {
                day = "0" + day;
            }
            $("#timeplace").html(day + '<span class="small">D</span>' + hour + '<span class="small">H</span>');
            setTimeout(function () {
                countdownStart(endtime);
            }, 1000);
        }
        else {
            $("#timeplace").html('00<span class="small">D</span>00<span class="small">H</span>');
        }
    }
</script>
<script type="text/javascript">
    $(document).ready(function () {

        var myParam = location.search.split('d=')[1] ? location.search.split('d=')[1] : '1';
        changehomenav(myParam);
    });
</script>
}
<div class="contentdeal">
    @if (Model != null)
    {
    @Html.HiddenFor(model => model.InventoryItemId)
    <h2>@Model.Name</h2>
    <h3>4D3N Stay</h3>
        if (Model.TypeName.ToLower().Equals("raffle"))
        {
            <div class="contentdealwrap">
                <div class="left">
                @{decimal pricedis = Model.Price - (Model.Price * Model.Discount / 100);}
                    <div class="pricetitle">RM @pricedis</div>
                    <div class="space"></div>
                    <div><input type="button" class="btnBuy" onclick="addToCart()" value ="BUY NOW!" /></div>
                    <div class="space"></div>
                    <div class="pricedetail">
                        <div class="old">ORIGINAL<br />RM @Model.Price</div>
                        <div class="curr">DISCOUNT <div class="big">@Model.Discount%</div> <span>(RM @pricedis)</span></div>
                    </div>
                    <div class="space"></div>
                    <div><button class="btnGift"><span class="fa fa-gift"></span> GIVE AS GIFT</button></div>
                    <div class="space"></div>
                    <div><button class="btnGift"><span class="fa fa-heart"></span> ADD TO WISHLIST</button></div>
                    <hr />
                    <div>
                        @{
                  var widthbar = "width:" + Model.SalesVisualMeter + "%";
                        }
                        <div class="barbg"><div class="baractive" style="@widthbar"></div></div>
                    </div>
                    <div class="priceremain">@{decimal remain = Model.MaximumSales - Model.Sales;<text>@remain</text>} raffle tickets remaining!</div>
                    <hr />
                    @*<div class="timeleft">
                        <div class="timelefttext">TIME<br />LEFT</div>
                        <div class="timeleftdetail">
                            <div id="timeplace">countdownExpire</div>
                            <script type="text/javascript">                                countdownExpire('@Model.ExpireDateStr')</script>
                            <div id="timeextend">Time extended!</div>
                        </div>
                    </div>*@
                    <hr />
                    <div class="share">
                        <div class="sharetext">SHARE</div>
                        <div class="sharedetail">
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-email.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-fb.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-twitter.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-pinterest.png")" /></a>
                        </div>
                    </div>
                    <hr />
                    <div class="reviews">
                        <div class="reviewtext">REVIEWS</div>
                        <div class="reviewdetail" id="reviewdetail">
                            <div class="reviewcount"><span class="fa fa-star"></span> @string.Format("{0:0.#}", Model.ReviewCount.Rating)/5</div>
                            <div class="reviewdata"><a  onclick="reviewPopUp()">@Model.ReviewCount.ReviewCount Reviews</a></div>
                        </div>
                    </div>
                    <hr />
                </div>
                <div class="right">
                    <div id="dealslide">@* class="mightyslider_modern_skin">*@
		                @*<div class="frame">
			                <div class="slide_element">
                                @if(Model.ImageUrl != null)
                                {
				                    <div class="slide" data-mightyslider="cover: '@Model.ImageUrl'"></div>
                                }
                                @if (Model.SubImageUrl != null)
                                {
                                    foreach (var subimg in Model.SubImageUrl)
                                    {
				                    <div class="slide" data-mightyslider="cover: '@subimg'"></div>
                                    }
                                }
			                </div>
		                </div>*@
                        
                        <div class="boxraffle">
                            <div class="boxrafflecontentwrap">
                            <div class="boxrafflecontent">
                                <div class="raflleticket">RM @Model.Price</div>
                            </div>
                            </div>
                        </div>
	                </div>
                    @if (Model.Prize != null)
                    {
                    <div class="prizecontent">
                        <div class="text">
                            <div class="titledesc">Buy the deal and stand to get the sur'PRIZE'</div>
                            <div class="title">@Model.Prize.Name</div>
                        </div>
                        <div class="imglist">
		                    <div class="mightyslider_carouselCoverFlow_skin clearfix" id="cover_flow">
			                    <div class="frame" data-mightyslider="width: 478, height: 120">
				                    <ul class="slide_element">
                                    @if (Model.Prize.SubImageUrl != null)
                                    {
                                        foreach (var subimg in Model.Prize.SubImageUrl)
                                        {
                                         <li class="slide" data-mightyslider="cover:'@subimg'"></li>
                                        }
                                    }
                                    </ul>
			                    </div>
		                    </div>

                        </div>
                    </div>
                    }
                    <div class="tagplace">
                        TAGS
                        @if (Model.Tag != null)
                        {
                            foreach (var tag in Model.Tag)
                            {
                            <span>@tag</span>   
                            }
                        }
                    </div>
                    <div class="detail">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs">
                          <li class="active"><a href="#productdetails" data-toggle="tab">Product Details</a></li>
                          <li><a href="#location" data-toggle="tab">Location</a></li>
                          <li><a href="#prize" data-toggle="tab">Prize</a></li>
                          <li><a href="#retailer" data-toggle="tab">Retailer</a></li>
                          <li><a href="#howkuazooworks" data-toggle="tab">How Kuazoo Works</a></li>
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content">
                          <div class="tab-pane fade in active" id="productdetails">
                            @Html.Raw(Model.Description.Replace(Environment.NewLine, "<br/>"))
                          </div>
                          <div class="tab-pane fade" id="location">
                            <div class="locationwrap">
                                <div id="map"></div>
                                <script type="text/javascript">
                                    $(function () {
                                        initializeEditMap(@Model.Latitude,@Model.Longitude);
                                    }); 
                                </script> 
                                <div id="mapdetail">
                                    <div class="mapdetailtitle">@Model.MerchantName</div>
                                    <div class="mapdetailaddress">
                                        @Model.AddressLine1<br />
                                        @Model.CityName,@Model.PostCode,@Model.CountryName
                                    </div>
                                </div>
                            </div>
                          </div>
                          <div class="tab-pane fade" id="prize"></div>
                          <div class="tab-pane fade" id="retailer">...</div>
                          <div class="tab-pane fade" id="howkuazooworks">...</div>
                        </div>
                    </div>
                    <div class="buyplace"><input type="button"  onclick="addToCart()" class="btnBuy" value ="BUY NOW!" /></div>
                </div>
            </div>
        }//kuazoo on
        else if (Model.SalesVisualMeter >= 100)
        {
            <div class="contentdealwrap">
                <div class="left">
                @{decimal pricedis = Model.Price - (Model.Price * Model.Discount / 100);}
                    <div class="pricetitle">RM @pricedis</div>
                    <div class="space"></div>
                    <div><input type="button" class="btnBuy disabled" value ="BUY NOW!" /></div>
                    <div class="space"></div>
                    <div class="pricedetail">
                        <div class="old">ORIGINAL<br />RM @Model.Price</div>
                        <div class="curr">DISCOUNT <div class="big">@Model.Discount%</div> <span>(RM @pricedis)</span></div>
                    </div>
                    <div class="space"></div>
                    <div><button class="btnGift disabled"><span class="fa fa-gift"></span> GIVE AS GIFT</button></div>
                    <div class="space"></div>
                    <div><button class="btnGift disabled"><span class="fa fa-heart"></span> ADD TO WISHLIST</button></div>
                    <hr />
                    <div>
                        <div class="barbg"><div class="baractive" style="width:100%"></div></div>
                    </div>
                    <div class="priceremain">All deals remaining!</div>
                    <hr />
                    <div class="share">
                        <div class="sharetext">SHARE</div>
                        <div class="sharedetail">
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-email.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-fb.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-twitter.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-pinterest.png")" /></a>
                        </div>
                    </div>
                    <hr />
                    <div class="reviews">
                        <div class="reviewtext">REVIEWS</div>
                        <div class="reviewdetail" id="reviewdetail">
                            <div class="reviewcount"><span class="fa fa-star"></span> @string.Format("{0:0.#}", Model.ReviewCount.Rating)/5</div>
                            <div class="reviewdata"><a  onclick="reviewPopUp()">@Model.ReviewCount.ReviewCount Reviews</a></div>
                        </div>
                    </div>
                    <hr />
                </div>
                <div class="right">
                    <div id="dealslide" class="mightyslider_modern_skin">
		                <div class="frame">
			                <div class="slide_element">
                                @if(Model.ImageUrl != null)
                                {
				                    <div class="slide" data-mightyslider="cover: '@Model.ImageUrl'"></div>
                                }
                                @if (Model.SubImageUrl != null)
                                {
                                    foreach (var subimg in Model.SubImageUrl)
                                    {
				                    <div class="slide" data-mightyslider="cover: '@subimg'"></div>
                                    }
                                }
			                </div>
		                </div>
                        
                        <div class="kuazoobg"></div>
                        <div class="kuazoobgwrap">
                            <div class="kuazoobgcontent">
                                <div class="boxTitle">KUAZOO!</div>
                                <div class="boxSubtitle">DRAW IS ON!</div>
                            </div>
                        </div>
	                </div>
                    @if (Model.Prize != null)
                    {
                    <div class="prizecontent">
                        <div class="text">
                            <div class="titledesc">Buy the deal and stand to get the sur'PRIZE'</div>
                            <div class="title">@Model.Prize.Name</div>
                        </div>
                        <div class="imglist">
		                    <div class="mightyslider_carouselCoverFlow_skin clearfix" id="cover_flow">
			                    <div class="frame" data-mightyslider="width: 478, height: 120">
				                    <ul class="slide_element">
                                    @if (Model.Prize.SubImageUrl != null)
                                    {
                                        foreach (var subimg in Model.Prize.SubImageUrl)
                                        {
                                         <li class="slide" data-mightyslider="cover:'@subimg'"></li>
                                        }
                                    }
                                    </ul>
			                    </div>
		                    </div>

                        </div>
                    </div>
                    }
                    <div class="tagplace">
                        TAGS
                        @if (Model.Tag != null)
                        {
                            foreach (var tag in Model.Tag)
                            {
                            <span>@tag</span>   
                            }
                        }
                    </div>
                    <div class="detail">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs">
                          <li class="active"><a href="#productdetails" data-toggle="tab">Product Details</a></li>
                          <li><a href="#location" data-toggle="tab">Location</a></li>
                          <li><a href="#prize" data-toggle="tab">Prize</a></li>
                          <li><a href="#retailer" data-toggle="tab">Retailer</a></li>
                          <li><a href="#howkuazooworks" data-toggle="tab">How Kuazoo Works</a></li>
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content">
                          <div class="tab-pane fade in active" id="productdetails">
                            @Html.Raw(Model.Description.Replace(Environment.NewLine, "<br/>"))
                          </div>
                          <div class="tab-pane fade" id="location">
                            <div class="locationwrap">
                                <div id="map"></div>
                                <script type="text/javascript">
                                    $(function () {
                                        initializeEditMap(@Model.Latitude,@Model.Longitude);
                                    }); 
                                </script> 
                                <div id="mapdetail">
                                    <div class="mapdetailtitle">@Model.MerchantName</div>
                                    <div class="mapdetailaddress">
                                        @Model.AddressLine1<br />
                                        @Model.CityName,@Model.PostCode,@Model.CountryName
                                    </div>
                                </div>
                            </div>
                          </div>
                          <div class="tab-pane fade" id="prize">...</div>
                          <div class="tab-pane fade" id="retailer">...</div>
                          <div class="tab-pane fade" id="howkuazooworks">...</div>
                        </div>
                    </div>
                    <div class="buyplace"><input type="button" class="btnBuy disabled" value ="BUY NOW!" /></div>
                </div>
            </div>
        }
        else if (Model.FlashDeal != null)
        {
            <div class="contentdealwrap">
                <div class="left">
                @{decimal pricedis = Model.Price - (Model.Price * Model.FlashDeal.Discount / 100);}
                    <div class="pricetitle">RM @pricedis</div>
                    <div class="space"></div>
                    <div><input type="button" onclick="addToCart()" class="btnBuy" value ="BUY NOW!" /></div>
                    <div class="space"></div>
                    <div class="pricedetail">
                        <div class="old">ORIGINAL<br />RM @Model.Price</div>
                        <div class="curr">DISCOUNT <div class="big">@Model.FlashDeal.Discount%</div> <span>(RM @pricedis)</span></div>
                    </div>
                    <div class="space"></div>
                    <div><button class="btnGift"><span class="fa fa-gift"></span> GIVE AS GIFT</button></div>
                    <div class="space"></div>
                    <div><button class="btnGift"><span class="fa fa-heart"></span> ADD TO WISHLIST</button></div>
                    <hr />
                    <div>
                        @{
                  var widthbar = "width:" + Model.SalesVisualMeter + "%";
                        }
                        <div class="barbg"><div class="baractive" style="@widthbar"></div></div>
                    </div>
                    <div class="priceremain">@{decimal remain = Model.MaximumSales - Model.Sales;<text>@remain</text>} deals remaining!</div>
                    <hr />
                    <div class="timeleft">
                        <div class="timelefttext">TIME<br />LEFT</div>
                        <div class="timeleftdetail">
                            <div id="timeplace">countdownExpire</div>
                            <script type="text/javascript">                                countdownExpire('@Model.ExpireDateStr')</script>
                            <div id="timeextend">Time extended!</div>
                        </div>
                    </div>
                    <hr />
                    <div class="share">
                        <div class="sharetext">SHARE</div>
                        <div class="sharedetail">
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-email.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-fb.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-twitter.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-pinterest.png")" /></a>
                        </div>
                    </div>
                    <hr />
                    <div class="reviews">
                        <div class="reviewtext">REVIEWS</div>
                        <div class="reviewdetail" id="reviewdetail">
                            <div class="reviewcount"><span class="fa fa-star"></span> @string.Format("{0:0.#}", Model.ReviewCount.Rating)/5</div>
                            <div class="reviewdata"><a  onclick="reviewPopUp()">@Model.ReviewCount.ReviewCount Reviews</a></div>
                        </div>
                    </div>
                    <hr />
                </div>
                <div class="right">
                    <div id="dealslide" class="mightyslider_modern_skin">
		                <div class="frame">
			                <div class="slide_element">
                                @if(Model.ImageUrl != null)
                                {
				                    <div class="slide" data-mightyslider="cover: '@Model.ImageUrl'"></div>
                                }
                                @if (Model.SubImageUrl != null)
                                {
                                    foreach (var subimg in Model.SubImageUrl)
                                    {
				                    <div class="slide" data-mightyslider="cover: '@subimg'"></div>
                                    }
                                }
			                </div>
		                </div>
                        <div id="flashdealtimeplace">
                        <div class="flashdealbg"></div>
                        <div class="flashdealbgwrap">
                        <div class="flashdealbgcontent">
                            <div class="boxTitle">FLASH DEAL!</div>
                            <div class="boxSubtitle">
                                <div class="boxSubtitleleft small">FLASH DEAL ENDING IN</div>
                                <div class="boxSubtitleright" id="flashdealtime"></div>
                                <script type="text/javascript"> countdownStart('@Model.FlashDeal.EndTimeStr')</script>
                            </div>
                            <br />
                            <div class="boxSubtitle">
                                <div class="boxSubtitlehalf ori">
                                    <div class="small">WAS</div>
                                    <div class="percen">@Model.Discount%</div>
                                    <div class="small">OFF</div>
                                </div>
                                <div class="boxSubtitlehalf dis">
                                    <div class="small">NOW</div>
                                    <div class="percen">@Model.FlashDeal.Discount%</div>
                                    <div class="small">OFF</div>
                                </div>
                            </div>
                        </div>
                        </div>
                        </div>
	                </div>
                    @if (Model.Prize != null)
                    {
                    <div class="prizecontent">
                        <div class="text">
                            <div class="titledesc">Buy the deal and stand to get the sur'PRIZE'</div>
                            <div class="title">@Model.Prize.Name</div>
                        </div>
                        <div class="imglist">
		                    <div class="mightyslider_carouselCoverFlow_skin clearfix" id="cover_flow">
			                    <div class="frame" data-mightyslider="width: 478, height: 120">
				                    <ul class="slide_element">
                                    @if (Model.Prize.SubImageUrl != null)
                                    {
                                        foreach (var subimg in Model.Prize.SubImageUrl)
                                        {
                                         <li class="slide" data-mightyslider="cover:'@subimg'"></li>
                                        }
                                    }
                                    </ul>
			                    </div>
		                    </div>

                        </div>
                    </div>
                    }
                    <div class="tagplace">
                        TAGS
                        @if (Model.Tag != null)
                        {
                            foreach (var tag in Model.Tag)
                            {
                            <span>@tag</span>   
                            }
                        }
                    </div>
                    <div class="detail">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs">
                          <li class="active"><a href="#productdetails" data-toggle="tab">Product Details</a></li>
                          <li><a href="#location" data-toggle="tab">Location</a></li>
                          <li><a href="#prize" data-toggle="tab">Prize</a></li>
                          <li><a href="#retailer" data-toggle="tab">Retailer</a></li>
                          <li><a href="#howkuazooworks" data-toggle="tab">How Kuazoo Works</a></li>
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content">
                          <div class="tab-pane fade in active" id="productdetails">
                            @Html.Raw(Model.Description.Replace(Environment.NewLine, "<br/>"))
                          </div>
                          <div class="tab-pane fade" id="location">
                            <div class="locationwrap">
                                <div id="map"></div>
                                <script type="text/javascript">
                                    $(function () {
                                        initializeEditMap(@Model.Latitude,@Model.Longitude);
                                    }); 
                                </script> 
                                <div id="mapdetail">
                                    <div class="mapdetailtitle">@Model.MerchantName</div>
                                    <div class="mapdetailaddress">
                                        @Model.AddressLine1<br />
                                        @Model.CityName,@Model.PostCode,@Model.CountryName
                                    </div>
                                </div>
                            </div>
                          </div>
                          <div class="tab-pane fade" id="prize">...</div>
                          <div class="tab-pane fade" id="retailer">...</div>
                          <div class="tab-pane fade" id="howkuazooworks">...</div>
                        </div>
                    </div>
                    <div class="buyplace"><input type="button" onclick="addToCart()" class="btnBuy" value ="BUY NOW!" /></div>
                </div>
            </div>
        }
        else
        {
            <div class="contentdealwrap">
                <div class="left">
                @{decimal pricedis = Model.Price - (Model.Price * Model.Discount / 100);}
                    <div class="pricetitle">RM @pricedis</div>
                    <div class="space"></div>
                    <div><input type="button" onclick="addToCart()" class="btnBuy" value ="BUY NOW!" /></div>
                    <div class="space"></div>
                    <div class="pricedetail">
                        <div class="old">ORIGINAL<br />RM @Model.Price</div>
                        <div class="curr">DISCOUNT <div class="big">@Model.Discount%</div> <span>(RM @pricedis)</span></div>
                    </div>
                    <div class="space"></div>
                    <div><button class="btnGift"><span class="fa fa-gift"></span> GIVE AS GIFT</button></div>
                    <div class="space"></div>
                    <div><button class="btnGift"><span class="fa fa-heart"></span> ADD TO WISHLIST</button></div>
                    <hr />
                    <div>
                        @{
                  var widthbar = "width:" + Model.SalesVisualMeter + "%";
                        }
                        <div class="barbg"><div class="baractive" style="@widthbar"></div></div>
                    </div>
                    <div class="priceremain">@{decimal remain = Model.MaximumSales - Model.Sales;<text>@remain</text>} deals remaining!</div>
                    <hr />
                    <div class="timeleft">
                        <div class="timelefttext">TIME<br />LEFT</div>
                        <div class="timeleftdetail">
                            <div id="timeplace">countdownExpire</div>
                            <script type="text/javascript">countdownExpire('@Model.ExpireDateStr')</script>
                            <div id="timeextend">Time extended!</div>
                        </div>
                    </div>
                    <hr />
                    <div class="share">
                        <div class="sharetext">SHARE</div>
                        <div class="sharedetail">
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-email.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-fb.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-twitter.png")" /></a>
                            <a href="#"><img src="@Url.Content("~/Content/img/icon/icon-pinterest.png")" /></a>
                        </div>
                    </div>
                    <hr />
                    <div class="reviews">
                        <div class="reviewtext">REVIEWS</div>
                        <div class="reviewdetail" id="reviewdetail">
                            <div class="reviewcount"><span class="fa fa-star"></span> @string.Format("{0:0.#}", Model.ReviewCount.Rating)/5</div>
                            <div class="reviewdata"><a  onclick="reviewPopUp()">@Model.ReviewCount.ReviewCount Reviews</a></div>
                        </div>
                    </div>
                    <hr />
                </div>
                <div class="right">
                    <div id="dealslide" class="mightyslider_modern_skin">
		                <div class="frame">
			                <div class="slide_element">
                                @if(Model.ImageUrl != null)
                                {
				                    <div class="slide" data-mightyslider="cover: '@Model.ImageUrl'"></div>
                                }
                                @if (Model.SubImageUrl != null)
                                {
                                    foreach (var subimg in Model.SubImageUrl)
                                    {
				                    <div class="slide" data-mightyslider="cover: '@subimg'"></div>
                                    }
                                }
			                </div>
		                </div>
	                </div>
                    @if (Model.Prize != null)
                    {
                    <div class="prizecontent">
                        <div class="text">
                            <div class="titledesc">Buy the deal and stand to get the sur'PRIZE'</div>
                            <div class="title">@Model.Prize.Name</div>
                        </div>
                        <div class="imglist">
		                    <div class="mightyslider_carouselCoverFlow_skin clearfix" id="cover_flow">
			                    <div class="frame" data-mightyslider="width: 478, height: 120">
				                    <ul class="slide_element">
                                    @if (Model.Prize.SubImageUrl != null)
                                    {
                                        foreach (var subimg in Model.Prize.SubImageUrl)
                                        {
                                         <li class="slide" data-mightyslider="cover:'@subimg'"></li>
                                        }
                                    }
                                    </ul>
			                    </div>
		                    </div>

                        </div>
                    </div>
                    }
                    <div class="tagplace">
                        TAGS
                        @if (Model.Tag != null)
                        {
                            foreach (var tag in Model.Tag)
                            {
                            <span>@tag</span>   
                            }
                        }
                    </div>
                    <div class="detail">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs">
                          <li class="active"><a href="#productdetails" data-toggle="tab">Product Details</a></li>
                          <li><a href="#location" data-toggle="tab">Location</a></li>
                          <li><a href="#prize" data-toggle="tab">Prize</a></li>
                          <li><a href="#retailer" data-toggle="tab">Retailer</a></li>
                          <li><a href="#howkuazooworks" data-toggle="tab">How Kuazoo Works</a></li>
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content">
                          <div class="tab-pane fade in active" id="productdetails">
                            @Html.Raw(Model.Description.Replace(Environment.NewLine, "<br/>"))
                          </div>
                          <div class="tab-pane fade" id="location">
                            <div class="locationwrap">
                                <div id="map"></div>
                                <script type="text/javascript">
                                    $(function () {
                                        initializeEditMap(@Model.Latitude,@Model.Longitude);
                                    }); 
                                </script> 
                                <div id="mapdetail">
                                    <div class="mapdetailtitle">@Model.MerchantName</div>
                                    <div class="mapdetailaddress">
                                        @Model.AddressLine1<br />
                                        @Model.CityName,@Model.PostCode,@Model.CountryName
                                    </div>
                                </div>
                            </div>
                          </div>
                          <div class="tab-pane fade" id="prize">...</div>
                          <div class="tab-pane fade" id="retailer">...</div>
                          <div class="tab-pane fade" id="howkuazooworks">...</div>
                        </div>
                    </div>
                    <div class="buyplace"><input type="button" onclick="addToCart()" class="btnBuy" value ="BUY NOW!" /></div>
                </div>
            </div>
        }
    }
</div>
@section AddToFooter
{
<script src="@Url.Content("~/Scripts/jquery.easing.1.3.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.mobile.just-touch.js")"></script>
<script src="@Url.Content("~/Scripts/mightyslider.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery.fancybox.js")" type="text/javascript"></script>
<link rel="stylesheet" href="@Url.Content("~/Content/fancy/jquery.fancybox.review.css")">
<script type="text/javascript">
    $(document).ready(function () {
        createCart();
        var $win = $(window),
				isTouch = !!('ontouchstart' in window),
				clickEvent = isTouch ? 'tap' : 'click';
        (function () {
            var $example = $('#dealslide'),
		    $frame = $('.frame', $example);
            $frame.mightySlider({
                speed: 1500,
                easing: 'easeOutExpo',
                viewport: 'fill',

                // Navigation options
                navigation: {
                    slideSize: '100%',
                    keyboardNavBy: 'slides'
                },

                // Dragging
                dragging: {
                    swingSpeed: 0.1
                },

                // Pages
                pages: {
                    activateOn: 'click'
                },

                // Commands
                commands: {
                    pages: 1,
                    buttons: 1
                },

                // Cycling
                cycling: {
                    cycleBy: 'pages',
                    pauseTime: 3000,
                    pauseOnHover: 1
                }
            });
        })();

        (function () {
            var $carousel = $('#cover_flow'),
				$frame = $('.frame', $carousel);
            $frame.mightySlider({
                speed: 1000,
                autoScale: 1,
                viewport: 'fill',
                startAt: 0,

                // Navigation options
                navigation: {
                    activateOn: clickEvent,
                    slideSize: '25.31%'
                },

                // Commands options
                commands: {
                    buttons: 1
                },

                // Scrolling options
                scrolling: {
                    scrollBy: 1
                },
                // Cycling
                cycling: {
                    cycleBy: 'pages',
                    pauseTime: 4000,
                    pauseOnHover: 1
                }
            });
        })();
    });
    function addToCart() {
        var id = $("#InventoryItemId").val();
        var values = { id: id, qty: 1 };
        _addToCart(values);
        window.location="@Url.Action("CheckOut", "Home")"
    }

</script>

<script type="text/javascript">

    var map;

    var infowindow = new google.maps.InfoWindow();

    function initializeEditMap(lat, lng) {

        geocoder = new google.maps.Geocoder();
        var loc = new google.maps.LatLng(lat, lng);
        var mapOptions = {
            zoom: 16,
            center: loc,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map"),
				            mapOptions);

        marker = new google.maps.Marker({
            map: map,
            draggable: true,
            animation: google.maps.Animation.DROP,
            position: loc
        });



    }

</script>
<script type="text/javascript">
    function reviewPopUp(){
        $.fancybox.open({
            href: '@Url.Action("Review", "Home", new { id = Model.InventoryItemId })',
            type: 'iframe',
            padding: 0,
            width:658,
            afterClose: function () {
                var id = $("#InventoryItemId").val();
                    $.ajax({
                    type:'GET',
                    url: "@Url.Action("ReviewCount","Home")",
                    data: {id:id},
                    dataType:"json",
                    success:function(data){
                        if(data.result!=true){
                            var html='<div class="reviewcount"><span class="fa fa-star"></span> ';
                            html += data.result.Rating.toFixed(1) +'/5</div>';
                            html += '<div class="reviewdata"><a onclick="reviewPopUp()">'+data.result.ReviewCount+' Reviews</a></div>';
                            $("#reviewdetail").html(html);
                        }
                        else{
                            alert(data.error);
                        }
                    }
                });    
            }
        });
    }
</script>
}